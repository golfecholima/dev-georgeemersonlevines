/**
 * @author Thomas S. Butler
 * @link http://butlerconsulting.com
 * @copyright 2013-2014 All Rights Reserved. Google Font Manager - A WordPress Plugin.
 * @abstract: This file contains the jQuery and JavaScript functions for the plugin.
 */function notifyuser(e){jQuery("#notification").empty();jQuery("#notification").html(e);jQuery("#notification").fadeIn("slow");var t=setTimeout(function(){jQuery("#notification").fadeOut("slow")},3500)}function go_ajax(e,t){var n=!1;if(!n){n=!0;jQuery.ajax({url:e,success:function(e){jQuery("#"+t).html(e);n=!1}})}}function handleRUsure(e){if(e=="nukeIT"){var t={action:"wp_googlefontmgr_killfonts",font:"Open Sans",remove:"all"};jQuery.post(ajaxurl,t,function(e){jQuery("#response-div").html(e)})}e=="updateStyle"&&setTheStylesheet();jQuery("#confirmation").fadeOut("fast");jQuery("#notice-overlay").fadeOut("slow");jQuery("#confirmation").html("");jQuery("#popwarning p").html("");jQuery("#rusureok p").html("")}function cancelme(){jQuery("#confirmation").removeClass("about");jQuery("#confirmation").fadeOut("fast");jQuery("#notice-overlay").fadeOut("slow");jQuery("#confirmation").html("");jQuery("#popwarning p").html("");jQuery("#rusureok p").html("")}function setTheStylesheet(){var e="";jQuery("#enable_important .jquery-switch-on").length==0?important="":important=" !important";jQuery("#setfont_styles li select").each(function(){var t=jQuery(this).attr("id"),n=t.replace("_select","");if(jQuery(this).val()!="default"){n=="li"&&(n="ul li, ol li");var r=n+"{ "+jQuery(this).val()+important+";",i="#"+t+"_extend";jQuery(i+" :checkbox:checked").each(function(){jQuery(this).val()!="undefined"&&(r=r+" "+jQuery(this).val()+important+";")});r+=" }";e+=r}});var t={action:"wp_googlefontmgr_setstyle",stylesheet:e};jQuery.post(ajaxurl,t,function(e){jQuery("#elementdtata").html(e)})}function updateStyleWarn(){jQuery("#rusureok #confirm").attr("data-action","updateStyle");jQuery("#rusureok p").html("You have made changes to your style sheet but you have not updated it? <strong>Would you like to update it now?</strong>");jQuery("#confirmation").html(jQuery("#rusureok").html());jQuery("#notice-overlay").fadeIn("slow");jQuery("#confirmation").fadeIn("slow");jQuery("#confirm").focus();return!1}function rgb2hex(e){e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return e===null?hex(FFFFFF):hex(e[1])+hex(e[2])+hex(e[3])}function hex(e){return isNaN(e)?"00":hexDigits[(e-e%16)/16]+hexDigits[e%16]}function isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}function setCurrentStyles(){jQuery("#setfont_styles li select option[value!='default'], li.extended-styles.cloneme .font-advanced-options").remove();jQuery("#font_select_holder option").clone().appendTo("#setfont_styles li select");jQuery("#setfont_styles li select").each(function(){var e=jQuery(this).attr("id"),t=e.replace("_select",""),n=jQuery("#testpage").contents().find(t).css("font-family"),n=n.replace(/'/g,""),n=n.replace(/"/g,""),n="'"+n+"'";jQuery("#"+e).val("font-family:"+n);var r="#"+e+"_extend";jQuery(r+" :checkbox").each(function(){var n=jQuery(this).attr("data-item"),r=jQuery("#testpage").contents().find(t).css(n),i=n+": "+r,s="#"+e+"_extend";if(n=="color"){r&&r.indexOf("rgb")>=0&&(r="#"+rgb2hex(r));jQuery(s+" a.wp-color-result").css("background-color",r);jQuery(s+" input.font-color.wp-color-picker").val(r);jQuery(s+" input.colorhold").val("color: "+r)}if(n=="font-size"&&r&&r.indexOf("em")!=1){var r=r.replace("px","");if(isNumeric(r)){var r=Math.round(r);jQuery(s).find("input.sizehold").val("font-size: "+r+"px");jQuery(s).find("input.fontsize").val(r)}}if(n=="line-height"&&r&&r.indexOf("em")!=1){var r=r.replace("px","");if(isNumeric(r)){var r=Math.round(r);jQuery(s).find("input.heighthold").val("line-height: "+r+"px");jQuery(s).find("input.lineheight").val(r)}}jQuery(this).val()==i?jQuery(this).prop("checked",!0):jQuery(this).prop("checked",!1)})});jQuery(".checkboxy.option.spinbox").each(function(){var e=jQuery(this).find("span").attr("data-name")+"-"+jQuery(this).parent().closest("li").attr("id");if(!jQuery(e).hasClass("spinBox"))var t=new SpinBox(document.getElementById(e),{minimum:10,maximum:120});jQuery(".spinBox span").removeAttr("id")});resetEmptyDropdowns()}function resetEmptyDropdowns(){jQuery("#setfont_styles li select").each(function(){jQuery(this).val()||jQuery(this).val("default")})}function closePanel(){jQuery("#viewertab").parent().animate({right:"-720px"},{queue:!1,duration:800});jQuery("#viewertab").parent().removeClass("open")}var ajaxLoading=!1;(function(e){e.fn.tipsy=function(t){t=e.extend({},e.fn.tipsy.defaults,t);return this.each(function(){var n=e.fn.tipsy.elementOptions(this,t);e(this).hover(function(){e.data(this,"cancel.tipsy",!0);var t=e.data(this,"active.tipsy");if(!t){t=e('<div class="tipsy"><div class="tipsy-inner"/></div>');t.css({position:"absolute",zIndex:1e5});e.data(this,"active.tipsy",t)}(e(this).attr("title")||typeof e(this).attr("original-title")!="string")&&e(this).attr("original-title",e(this).attr("title")||"").removeAttr("title");var r;typeof n.title=="string"?r=e(this).attr(n.title=="title"?"original-title":n.title):typeof n.title=="function"&&(r=n.title.call(this));t.find(".tipsy-inner")[n.html?"html":"text"](r||n.fallback);var i=e.extend({},e(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});t.get(0).className="tipsy";t.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var s=t[0].offsetWidth,o=t[0].offsetHeight,u=typeof n.gravity=="function"?n.gravity.call(this):n.gravity;switch(u.charAt(0)){case"n":t.css({top:i.top+i.height,left:i.left+i.width/2-s/2}).addClass("tipsy-north");break;case"s":t.css({top:i.top-o,left:i.left+i.width/2-s/2}).addClass("tipsy-south");break;case"e":t.css({top:i.top+i.height/2-o/2,left:i.left-s}).addClass("tipsy-east");break;case"w":t.css({top:i.top+i.height/2-o/2,left:i.left+i.width}).addClass("tipsy-west")}n.fade?t.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:.8}):t.css({visibility:"visible"})},function(){e.data(this,"cancel.tipsy",!1);var t=this;setTimeout(function(){if(e.data(this,"cancel.tipsy"))return;var r=e.data(t,"active.tipsy");r&&(n.fade?r.stop().fadeOut(function(){e(this).remove()}):r.remove())},100)})})};e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n};e.fn.tipsy.defaults={fade:!1,fallback:"",gravity:"n",html:!1,title:"title"};e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"};e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"}})(jQuery);var hexDigits=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");jQuery(document).ready(function(){jQuery(".additem-button, .editor-button").hover(function(){var e=jQuery(this).attr("data-ref");jQuery(this).hasClass("disabled")&&jQuery("#descriptor").addClass("disabled");jQuery("#descriptor").text("("+e+")")},function(){jQuery("#descriptor").text("");jQuery("#descriptor").removeClass("disabled")});jQuery(".editor-button, .mainbar-button").live("click",function(){var e=jQuery(this).attr("data-img"),t=jQuery("#"+jQuery(this).attr("id")+" img").attr("src");jQuery(this).hasClass("persist")&&!jQuery(this).hasClass("active")?jQuery(this).addClass("active"):jQuery(this).removeClass("active");if(e){jQuery(this).attr("data-img",t);jQuery("#"+jQuery(this).attr("id")+" img").attr("src",e)}});jQuery("#fonts_container").on("click",".fonttabs",function(){jQuery(".mainbar-button").removeClass("active");jQuery(".fonttabs, .tabsbox").removeClass("selected");jQuery(jQuery(this).attr("data-tab")).addClass("selected");if(jQuery(this).attr("id")=="default_styles_tab"){jQuery("#google_font_stylechange").val()==0&&setCurrentStyles();jQuery("#mainbar_apply").addClass("active");jQuery("#wp_googlefontmgr_settings, #wp_googlefontmgr_helpfiles").hide();jQuery("#wp_googlefontmgr_options").fadeIn("slow")}else jQuery("#mainbar_apply").removeClass("active");if(jQuery(this).attr("id")=="documentation_tab"){jQuery("#mainbar_help").addClass("active");jQuery("#wp_googlefontmgr_settings, #wp_googlefontmgr_options").hide();jQuery("#wp_googlefontmgr_helpfiles").fadeIn("slow")}else{jQuery("#mainbar_help").removeClass("active");jQuery("#wp_googlefontmgr_settings, #wp_googlefontmgr_helpfiles").hide();jQuery("#wp_googlefontmgr_options").fadeIn("slow")}jQuery(this).addClass("selected")});jQuery("#viewertab").tipsy({gravity:"e",fade:!0});jQuery(".mainbar-button, .advancefont").tipsy({gravity:"s",fade:!0});jQuery("div.iosconrols label").on("click",function(e){e.preventDefault();e.stopPropagation();return!1});jQuery(".iosconrols .ios-switch input").radiobutton({className:"jquery-switch",checkedClass:"jquery-switch-on"});jQuery("#mainbar_settings").on("click",function(e){e.stopPropagation();e.preventDefault();if(jQuery("#wp_googlefontmgr_settings").is(":visible")){jQuery("#wp_googlefontmgr_settings, #wp_googlefontmgr_helpfiles, #div.updated").hide();jQuery("#wp_googlefontmgr_options").fadeIn();jQuery("#mainbar_settings").removeClass("active")}else{jQuery(".mainbar-button").removeClass("active");jQuery("#wp_googlefontmgr_options, #wp_googlefontmgr_helpfiles").hide();jQuery("#wp_googlefontmgr_settings").fadeIn();jQuery("#mainbar_settings").addClass("active");jQuery(".fonttabs, .tabsbox").removeClass("selected");jQuery("#selected_fonts_tab, #selector_tab").addClass("selected")}});jQuery("#viewertab").on("click",function(){if(jQuery(this).parent().hasClass("open")){jQuery(this).parent().animate({right:"-720px"},{queue:!1,duration:800});jQuery(this).parent().removeClass("open")}else{jQuery(this).parent().animate({right:"-65px"},{queue:!1,duration:800});jQuery(this).parent().addClass("open")}});jQuery("#mainbar_nukeit").on("click",function(e){e.preventDefault();e.stopPropagation();if(jQuery(this).hasClass("disabled"))return!1;jQuery("#rusureok #confirm").attr("data-action","nukeIT");jQuery("#rusureok p").html("Are you sure you want to remove all of your current font selections? <strong>WARNING! This action cannot be undone.</strong>");jQuery("#confirmation").html(jQuery("#rusureok").html());jQuery("#notice-overlay").fadeIn("slow");jQuery("#confirmation").fadeIn("slow");jQuery("#confirm").focus()});jQuery("#font_inspector_select").on("change",function(e){e.preventDefault();e.stopPropagation();jQuery("#elementdtata").html(jQuery("#loaddata").html());if(jQuery(this).val()){var t={action:"wp_googlefontmgr_inspector",font:jQuery(this).val()};jQuery.post(ajaxurl,t,function(e){jQuery("#elementdtata").html(e)})}else jQuery("#elementdtata").empty()});jQuery(".ios-switch").on("click",function(e){e.stopPropagation();var t={action:"wp_googlefontmgr_setoptions",element:jQuery(this).attr("id"),val:jQuery(this).find("input").val()};jQuery.post(ajaxurl,t,function(e){jQuery("#response-div").html(e)})});jQuery("#mainbar_apply").on("click",function(e){e.preventDefault();e.stopPropagation();if(jQuery(this).hasClass("disabled"))return!1;jQuery(".mainbar-button").removeClass("active");if(jQuery("#default_styles_tab").hasClass("selected")){jQuery(this).removeClass("active");jQuery(".fonttabs, .tabsbox").removeClass("selected");jQuery("#default_styles_tab, #styles_tab").removeClass("selected");jQuery("#selected_fonts_tab, #selector_tab").addClass("selected");jQuery("#wp_googlefontmgr_helpfiles, #wp_googlefontmgr_settings").hide();jQuery("#wp_googlefontmgr_options").fadeIn("slow")}else{jQuery(this).addClass("active");jQuery(".fonttabs, .tabsbox").removeClass("selected");jQuery("#default_styles_tab, #styles_tab").addClass("selected");jQuery("#wp_googlefontmgr_helpfiles, #wp_googlefontmgr_settings").hide();jQuery("#wp_googlefontmgr_options").fadeIn("slow")}jQuery("#google_font_stylechange").val()==0&&setCurrentStyles()});jQuery("#mainbar_help").on("click",function(e){e.preventDefault();e.stopPropagation();jQuery(".mainbar-button").removeClass("active");if(jQuery("#documentation_tab").hasClass("selected")){jQuery(this).removeClass("active");jQuery(".fonttabs, .tabsbox").removeClass("selected");jQuery("#documentation_tab, #styles_tab").removeClass("selected");jQuery("#selected_fonts_tab, #selector_tab").addClass("selected");jQuery("#wp_googlefontmgr_settings, #wp_googlefontmgr_helpfiles").hide();jQuery("#wp_googlefontmgr_options").fadeIn("slow")}else{jQuery(this).addClass("active");jQuery(".fonttabs, .tabsbox").removeClass("selected");jQuery("#documentation_tab, #docs_tab").addClass("selected");jQuery("#wp_googlefontmgr_settings, #wp_googlefontmgr_options").hide();jQuery("#wp_googlefontmgr_helpfiles").fadeIn("slow")}});jQuery("#mainbar_info").on("click",function(e){e.preventDefault();e.stopPropagation();jQuery("#confirmation").html(jQuery("#aboutus").html());jQuery("#confirmation").addClass("about");jQuery("#notice-overlay").fadeIn("slow");jQuery("#confirmation").fadeIn("slow");jQuery("#confirm").focus()});jQuery(".advancefont").on("click",function(e){e.preventDefault();e.stopPropagation();if(!!jQuery(this).hasClass("disabled"))return!1;if(jQuery(this).parent().next("li.extended-styles").hasClass("open")){jQuery(this).parent().next("li.extended-styles").removeClass("open");jQuery(this).parent("li").removeAttr("style");jQuery(this).removeClass("open")}else{jQuery(this).parent().next("li.extended-styles").addClass("open");jQuery(this).parent("li").css("background","rgba(0,0,0,0.05)");jQuery(this).addClass("open")}});var e={hide:!0,palettes:!0};jQuery(".font-color").wpColorPicker(e);jQuery(".wp-color-result, .wp-picker-default").on("click",function(){var e=!1,t="#"+jQuery(this).parent().closest("li").attr("id"),n=jQuery(this).parent().find("input.font-color.wp-color-picker").val(),r="#"+jQuery(t).prev("li").find("select").attr("id");if(jQuery(t).find("input.colorhold").val()!=="color: "+n){jQuery(t).find("input.colorhold").val("color: "+n);jQuery(t).find("input.colorhold").attr("checked","checked");e=!0}if(jQuery(r).val()!="default"&&e){jQuery("#google_font_stylechange").val(1);jQuery("#google_font_updatestyle").fadeIn("slow")}});jQuery(".checkboxy.option.spinbox input").on("change",function(){var e=!1,t="#"+jQuery(this).parent().closest("li").attr("id"),n="#"+jQuery(t).prev("li").find("select").attr("id");if(jQuery(this).hasClass("fontsize")){var r=jQuery(this).parent().find("input.fontsize").val();if(jQuery(t).find("input.sizehold").val()!=="font-size: "+r+"px"){jQuery(t).find("input.sizehold").val("font-size: "+r+"px");jQuery(t).find("input.sizehold").attr("checked","checked");e=!0}}if(jQuery(this).hasClass("lineheight")){var r=jQuery(this).parent().find("input.lineheight").val();if(jQuery(t).find("input.heighthold").val()!=="line-height: "+r+"px"){jQuery(t).find("input.heighthold").val("line-height: "+r+"px");jQuery(t).find("input.heighthold").attr("checked","checked");e=!0}}if(jQuery(n).val()!="default"&&e){jQuery("#google_font_stylechange").val(1);jQuery("#google_font_updatestyle").fadeIn("slow")}});jQuery("#setfont_styles select").on("change",function(){jQuery("#google_font_stylechange").val(1);jQuery("#google_font_updatestyle").fadeIn("slow")});jQuery(".extended-styles input[type=checkbox]").on("change",function(){var e="#"+jQuery(this).parent().closest("li").attr("id"),t=jQuery(this).parent().find("input.font-color.wp-color-picker").val(),n="#"+jQuery(e).prev("li").find("select").attr("id");if(jQuery(n).val()!="default"){jQuery("#google_font_stylechange").val(1);jQuery("#google_font_updatestyle").fadeIn("slow")}});jQuery("#fontfinder, #font_inspector_select").val("");jQuery("#google_font_stylechange").val(0);jQuery("#google_font_updatestyle").hide();jQuery(window).bind("beforeunload",function(){if(jQuery("#google_font_stylechange").val()==1)return updateStyleWarn()});var t=setTimeout(function(){jQuery("#poststuff").fadeIn()},750)});